X3.1搬家完美详细教程，亲测总结版
http://www.discuz.net/forum.php?mod=viewthread&tid=3474772

第一步：备份网站数据
进入后台—站长—数据库—备份，数据备份类型选择“Discuz!和 UCenter数据”，备份成功以后，数据自动保存在data文件夹下。

第二步：网站文件下载
把整个网站文件打包（虚拟主机管理控制面板一般都有整站压缩和解压的功能，在控制面板选择压缩，压缩之后的文件一般在FTP DB文件夹里面，然后把压缩包下载到本地电脑，如果虚拟主机没有在线压缩功能那就直接使用FTP下载文件到本地保存。

第三步：整理下载到本地的网站文件
1.把下载下来的文件里面的下列文件删除，请完全放心删除掉这几个文件，重新装上的时候会自动产生新的文件。
       /install/install.lock  （有的下载下来之后就没有这个文件，如果没有就不用管）
/config/config_global.php
/config/config_ucenter.php
/uc_server/data/config.inc.php


2.到官方下载一个Discuz! X3的安装包，把 upload里的/install/文件夹复制过来覆盖你下载下来的网站文件。


3.把从官方下载下来的Discuz! X3安装包里面的 utility/restore.php 文件放到你网站文件的/data/文件夹内，这是用于数据库还原。

第四步：将整理好的网站文件包上传到新主机空间（放网页资料的文件夹下）
建议压缩之后在使用FTP上传，上传完成之后进入虚拟主机控制面板在线解压，这样可以节约很多时间，目前几乎所有的虚拟主机都有在线解压功能，格式一般是rar格式，不过有的部分虚拟主机如linux主机就只支持.zip格式，所以打包前请注意。

第五步：域名解析及空间绑定域名
进入域名控制面板把域名解析到你新的虚拟主机IP上，然后在进入虚拟主机空间绑定域名。

第六步：重新安装discuz
//你的域名/instal/进行安装，填入你新的虚拟主机数据库名和用户名及数据库密码，注意数据库的数据表前缀和以前一样，一般你之前的数据表如果没有改动的话，你重新安装的时候默认的就是和你以前的一样，所以可以不用改。当你安装的时候可能会提示要你删除data/install.lock这个文件才可以继续安装，那么你可以进入FTP删除之后然后返回安装页面刷新一下再继续安装，这就可以安装了。

第七步：还原数据库
安装成功后，用你安装的时候填写的管理员帐号和密码登录，进入后台—站长—数据库—恢复—数据恢复，选中要恢复的数据然后点击右边导入，点击确定即可恢复数据，为了安全起见当成功恢复数据后进入FTP删除/data/restore.php这个文件。
有时候进入之后数据恢复，发现没有可供还原的数据，那么你可以看到下面这一行文字，那你直接点击你的网址在浏览器当中恢复数据即可，为了安全起见当成功恢复数据后进入FTP删除/data/restore.php这个文件。
您可以在本页面数据备份记录处导入备份恢复数据，也可以通过在浏览器中执行 tp://www.你的域名.com/data/restore.php 恢复数据

第八步：检查UCenter能否登陆
    提示：1、检查UCenter 访问地址设置是否正确（没有更换域名做第六步安装，一般不会出错）
              2、创始人密码和admin管理员密码不是同一个，创始人密码是上面第六步重新安装discuz程序时设置的密码。

第九步：检查UCenter应用是否通讯成功
    后台——UCenter——应用管理，查看通讯情况，若通讯失败，请检查通信密钥设置是否相同。
    后台——站长——UCenter设置，检查UCenter 通信密钥是否和UCenter应用设置相同

第十步：同步站点信息
    后台——工具——云平台诊断工具，点击“同步站点信息”，查看是否能够同步。

第十一步：更新缓存
数据还原成功之后，在后台退出帐号，用你原来的后台管理员帐号登陆，进入后台更新缓存，网站搬家成功结束。
